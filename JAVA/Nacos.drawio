<mxfile host="app.diagrams.net" agent="Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/131.0.0.0 Safari/537.36" version="26.0.6">
  <diagram name="第 1 页" id="EoKzsfYvX2hHvfft86sc">
    <mxGraphModel dx="2390" dy="1243" grid="1" gridSize="10" guides="1" tooltips="1" connect="1" arrows="1" fold="1" page="1" pageScale="1" pageWidth="827" pageHeight="1169" math="0" shadow="0">
      <root>
        <mxCell id="0" />
        <mxCell id="1" parent="0" />
        <mxCell id="t9MxABzWcRTLGMJupPC0-1" value="Nacos源码怎么看启动类呢？&lt;div&gt;&lt;span style=&quot;white-space: pre;&quot;&gt;&#x9;&lt;/span&gt;源码下载下来，没有头绪，那么就可以下载nacos-server.zip，解压之后，bin文件夹下，有启动脚本，查看脚本，可以看到类似 java -jar 的命令，就可以看到哪个是启动包。这里看到的是nacos-server.jar，在包里面的target文件夹下面，进而查看META-INF文件夹下面的MAINFEST.MF文件，可以看到Start-Class的配置项，这个就是启动类。&lt;br&gt;&lt;/div&gt;" style="rounded=0;whiteSpace=wrap;html=1;fontSize=18;fontStyle=1;verticalAlign=top;align=left;" vertex="1" parent="1">
          <mxGeometry y="50" width="590" height="150" as="geometry" />
        </mxCell>
        <mxCell id="t9MxABzWcRTLGMJupPC0-2" value="连接nacos的服务挂掉了之后，nacos客户端上的服务列表不会及时更新，如果客户端用到了这个错误的服务地址怎么办？有重试机制，在rebin、open feign里面有重试的机制。" style="rounded=0;whiteSpace=wrap;html=1;fontSize=18;fontStyle=1;verticalAlign=top;align=left;" vertex="1" parent="1">
          <mxGeometry x="690" y="40" width="590" height="150" as="geometry" />
        </mxCell>
        <mxCell id="t9MxABzWcRTLGMJupPC0-3" value="如果没有idea的专业版，构建Spring boot项目，可以用阿里云的脚手架来生成项目：https://start.aliyun.com/&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;Spring、Spring Boot、Spring Cloud、Spring Cloud Alibaba之间的关系：&lt;/div&gt;&lt;div&gt;&lt;div&gt;Spring 是基础框架，提供核心的依赖注入和面向切面编程等功能。&lt;/div&gt;&lt;div&gt;Spring Boot 简化了 Spring 应用的开发，通过自动配置和起步依赖等特性，让开发更加快捷。&lt;/div&gt;&lt;div&gt;Spring Cloud 基于 Spring Boot，提供了分布式系统开发的工具集，解决分布式开发中的一系列问题。&lt;/div&gt;&lt;div&gt;Spring Cloud Alibaba 是 Spring Cloud 的实现，提供了阿里巴巴在微服务开发中的一些特色组件和实践，扩展了 Spring Cloud 的能力。&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;在使用这些框架时，要注意版本的兼容性，不同的 Spring Boot 版本可能需要搭配不同的 Spring Cloud 版本，Spring Cloud Alibaba 也有与之匹配的版本范围。可以通过&amp;nbsp;https://github.com/alibaba/spring-cloud-alibaba/wiki/版本说明&amp;nbsp; &amp;nbsp;来查看对应的版本。&lt;/div&gt;&lt;/div&gt;" style="rounded=0;whiteSpace=wrap;html=1;fontSize=18;fontStyle=1;verticalAlign=top;align=left;" vertex="1" parent="1">
          <mxGeometry x="1380" width="1030" height="330" as="geometry" />
        </mxCell>
        <mxCell id="t9MxABzWcRTLGMJupPC0-4" value="Nacos客户端怎么启动自动注册的？&lt;div&gt;&lt;span style=&quot;white-space: pre;&quot;&gt;&#x9;&lt;/span&gt;基于Spring boot的自动装配机制。加载&amp;nbsp;spring-cloud-starter-alibaba-nacos-discovery 的jar包，所以里面肯定就有一个spring.factories文件，里面就有自动装配的类，一个一个看，根据类的名称猜测，其中&amp;nbsp;NacosServiceRegistryAutoConfiguration 就是用来注册的自动配置类，自动注入一个&amp;nbsp;NacosAutoServiceRegistration 类，它的构造方法里面，调用了父类&amp;nbsp;AbstractAutoServiceRegistration的构造方法，这个父类，继承了ApplicationListener&amp;lt;WebServerInitializedEvent&amp;gt;，这是spring的监听器，监听了webserver初始化的事件，那么Spring boot在启动的时候就会启动一个webserver，同时发布这个事件，所以就会调用到这个父类的&amp;nbsp;onApplicationEvent 方法，从而调用 bind()----》start()---》register()----》registerInstance()----》registerService()----》reqApi()从而调用http请求服务端的注册接口 /nacos/v1/ns/instance 进行注册。&lt;br&gt;&lt;/div&gt;" style="rounded=0;whiteSpace=wrap;html=1;fontSize=18;fontStyle=1;verticalAlign=top;align=left;" vertex="1" parent="1">
          <mxGeometry y="280" width="650" height="320" as="geometry" />
        </mxCell>
        <mxCell id="t9MxABzWcRTLGMJupPC0-5" value="Nacos服务端怎么接收客户端的注册请求呢？" style="rounded=0;whiteSpace=wrap;html=1;fontSize=18;fontStyle=1;verticalAlign=top;align=left;" vertex="1" parent="1">
          <mxGeometry x="740" y="280" width="650" height="320" as="geometry" />
        </mxCell>
      </root>
    </mxGraphModel>
  </diagram>
</mxfile>
